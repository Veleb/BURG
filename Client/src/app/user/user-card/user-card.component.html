<div class="user-card">
  <div class="user-header">
    <span class="user-name">{{ user?.fullName }}</span>
    <span class="user-role role-{{ user?.role }}">{{ user?.role }}</span>
  </div>

  <div class="user-detail">Email{{ user?.email }}</div>
  <div class="user-detail">Phone Number{{ user?.phoneNumber }}</div>
  
  @if (user?.role === 'admin') {
    <div class="user-detail">User ID:{{ user?._id }}</div>
  }

  @if (user?.certificates?.length) {
    <div class="certificate-section">
      @for (cert of user?.certificates; track cert._id) {
        <div class="user-detail">Certificate Code: {{ cert.code }}</div>
        <div class="user-detail">Download Link: {{ cert.downloadLink }}</div>
      }
      @if (!isAddingCertificate) {
        <button class="btn btn-primary" (click)="startAddingCertificate()">Redeem New Certificate</button>
      }
    </div>
  } @else {
    @if (!isAddingCertificate) {
      <button class="btn btn-primary" (click)="startAddingCertificate()">Redeem Certificate</button>
    }
  }

  @if (isAddingCertificate) {
    <div class="certificate-form">
      <input
        type="text"
        [(ngModel)]="certificateCodeInput"
        placeholder="Enter certificate code"
      />
      <button class="btn btn-primary" (click)="redeemCertificate()">Redeem</button>
      <button class="btn btn-secondary" (click)="cancelAddCertificate()">Cancel</button>
    </div>
  }
</div>